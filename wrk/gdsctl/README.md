# サービスアカウントの準備
 Google WorkspaceのAdmin SDK APIを用いてサービスアカウントを使ったコマンド実行を可能とするまでのやることリスト
## 前提条件
* Google Cloud Console
  * コンソールにアクセスできるアカウントがある
  * プロジェクトを登録済み
* Google Workspace Admin Console
  * 管理コンソールにアクセスできるアカウントがある
  * 特権管理者アカウントを持つこと
## 準備
### Google Cloud ConsoleからOAuth2クライアントを登録
 Googleが提供するAPIを利用するためには、事前にOAuth2クライアントを登録する必要がある。以下は、Google Cloud Console上での操作を指す。
 1. [APIとサービス]-[OAuth同意画面]
    * 利用者に対して通知するAPIアクセスを登録する。
 2. [APIとサービス]-[有効なAPIとサービス]
    * 利用するGoogle APIを登録する。
    * 「Admin SDK API」を有効にする。
 3. [APIとサービス]-[認証画面]
    * サービスアカウントを登録する。
    * 識別名を登録し、鍵を生成、鍵をダウンロードする。
    * Workspaceの操作に関するロールやアクセス権を付与する必要はない。
### Google Workspace Admin Consoleからドメイン全体を委任するアプリケーションを登録
 Google Workspaceの所有者がアプリケーションに対して特権を付与するための手続きを指す。要点は、必要最低限のスコープに限定して委任する点となる。
  1. [セキュリティ]-[アクセスとデータ管理]-[APIの制御]
     * 委任するアプリケーションを登録する。
     * クライアントIDには、前述で登録したOAuth2クライアントを指定する。
     * スコープは前述で登録したOAuth2クライアントに付与するAPIスコープを指定する。
  2. サービスアカウントに使用する管理者権限が付与されたアカウントを登録
     * サービスアカウントが必要とする管理者ロールのみに絞って付与する。
     * アカウントの管理だけならば、ユーザー管理者ロールを付与する。
     * Chrome OSデバイスの管理だけならば、サービス管理者ロールを付与する。
     * 厳密に必要最低限の管理者権限を指定して運用するのが保全観点だと好ましい。

Written by Arteria Studio.(rink)
